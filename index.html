<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>с тебя чипсеки</title>
<style>
  body, html {
    margin: 0; padding: 0; overflow: hidden;
    background: #000;
    height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
  }
  canvas {
    display: block;
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 0;
  }
  #footerText {
    position: fixed;
    bottom: 10px;
    right: 10px;
    font-size: 12px;
    color: rgba(255,255,255,0.4);
    z-index: 10;
    user-select: none;
  }
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<div id="footerText">Иисус тут не поможет</div>

<script>
(() => {
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  let W, H;

  function resize() {
    W = window.innerWidth;
    H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;
  }
  window.addEventListener('resize', resize);
  resize();

  // ------------------
  // Полупрозрачные розовые сердечки — фон
  class HeartParticle {
    constructor() {
      this.reset();
    }
    reset() {
      this.x = Math.random() * W;
      this.y = Math.random() * H;
      this.size = 8 + Math.random() * 12;
      this.alpha = 0.1 + Math.random() * 0.15;
      this.speedX = (Math.random() - 0.5) * 0.3;
      this.speedY = (Math.random() - 0.5) * 0.3;
      this.angle = Math.random() * Math.PI * 2;
      this.angleSpeed = (Math.random() - 0.5) * 0.01;
      this.color = rgba(255, 182, 193, ${this.alpha}); // lightpink with alpha
    }
    update() {
      this.x += this.speedX;
      this.y += this.speedY;
      this.angle += this.angleSpeed;
      if (this.x < -20) this.x = W + 20;
      else if (this.x > W + 20) this.x = -20;
      if (this.y < -20) this.y = H + 20;
      else if (this.y > H + 20) this.y = -20;
    }
    draw(ctx) {
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.angle);
      ctx.fillStyle = this.color;
      ctx.beginPath();
      // Рисуем сердечко через две окружности и треугольник
      let size = this.size / 2;
      ctx.moveTo(0, size);
      ctx.bezierCurveTo(size, size, size, 0, 0, -size / 2);
      ctx.bezierCurveTo(-size, 0, -size, size, 0, size);
      ctx.fill();
      ctx.restore();
    }
  }

  // Создаём фоновые сердечки
  const hearts = [];
  for (let i = 0; i < 80; i++) {
    hearts.push(new HeartParticle());
  }

  // ------------------
  // Частицы для текста (светлячки)
  // Настроим текст "с тебя чипсеки"
  const text = 'с тебя чипсеки';
  // Создаем canvas для рендеринга текста и получения позиций частиц
  const textCanvas = document.createElement('canvas');
  const textCtx = textCanvas.getContext('2d');
  let particles = [];
  let textWidth, textHeight;

  function createTextParticles() {
    // Размеры для offscreen canvas
    textCanvas.width = W;
    textCanvas.height = H;
    const fontSize = Math.min(W / (text.length * 0.7), 100);
    textCtx.clearRect(0, 0, textCanvas.width, textCanvas.height);
    textCtx.font = bold ${fontSize}px 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    textCtx.textBaseline = 'middle';
    textCtx.textAlign = 'center';
    textCtx.fillStyle = 'white';
    textCtx.fillText(text, W / 2, H / 2);

    const imageData = textCtx.getImageData(0, 0, W, H);
    const data = imageData.data;

    particles = [];
    // Идем по пикселям с шагом 6 (чем меньше — тем больше частиц)
    const step = 6;
    for (let y = 0; y < H; y += step) {
      for (let x = 0; x < W; x += step) {
        const index = (y * W + x) * 4;
        if (data[index + 3] > 128) { // Альфа > 128 — пиксель непрозрачный
          particles.push({
            x: x + (Math.random() - 0.5) * 2,
            y: y + (Math.random() - 0.5) * 2,
            baseX: x,
            baseY: y,
            size: 1.5 + Math.random(),
            alpha: 0.6 + Math.random() * 0.4,
            phase: Math.random() * Math.PI * 2
          });
        }
      }
    }
  }
createTextParticles();

  // ------------------
  // Анимация
  function animate() {
    ctx.clearRect(0, 0, W, H);

    // Рисуем сердечки-фон
    hearts.forEach(h => {
      h.update();
      h.draw(ctx);
    });

    // Рисуем текстовые частицы (светлячки)
    const time = Date.now() * 0.002;
    particles.forEach(p => {
      // Слегка двигаются на месте (плавное мерцание)
      p.alpha += Math.sin(time + p.phase) * 0.02;
      if (p.alpha > 1) p.alpha = 1;
      if (p.alpha < 0.4) p.alpha = 0.4;

      // Плавно колеблются по x,y в районе base координат (±1.2 px)
      const dx = Math.sin(time + p.phase) * 1.2;
      const dy = Math.cos(time + p.phase) * 1.2;

      ctx.beginPath();
      ctx.fillStyle = rgba(0, 255, 255, ${p.alpha.toFixed(2)}); // неоновый голубой светлячок
      ctx.shadowColor = 'rgba(0, 255, 255, 0.7)';
      ctx.shadowBlur = 6;
      ctx.arc(p.baseX + dx, p.baseY + dy, p.size, 0, Math.PI * 2);
      ctx.fill();
    });

    requestAnimationFrame(animate);
  }

  animate();

})();
</script>
</body>
</html>
