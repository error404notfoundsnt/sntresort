<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>с тебя чипсе</title>
<style>
  html, body { margin:0; padding:0; overflow:hidden; width:100vw; height:100vh; background:#000; user-select:none; }
  #bottomText { position:fixed; right:10px; bottom:5px; font-size:12px; color:rgba(255,255,255,0.5); z-index:10; }
  canvas { position:absolute; top:0; left:0; display:block; }
</style>
</head>
<body>
<canvas id="background"></canvas>
<canvas id="textCanvas"></canvas>
<div id="bottomText">Иисус тут не поможет</div>
<script>
const bgC = document.getElementById('background'), bgCtx = bgC.getContext('2d');
const txC = document.getElementById('textCanvas'), txCtx = txC.getContext('2d');
let W, H, hearts = [], textParticles = [], time=0;
const text = 'с тебя чипсеки', fontSize=110;

// Настройка размеров
function resize(){
  W=innerWidth; H=innerHeight;
  bgC.width=W; bgC.height=H;
  txC.width=W; txC.height=H;
  makeHearts();
  makeTextParticles();
}
window.addEventListener('resize',resize);
resize();

// Создаем стеклянные сердечки
class Heart {
  constructor(){ this.reset(); }
  reset(){
    this.x=Math.random()*W; this.y=Math.random()*H;
    this.size=8+Math.random()*7;
    this.speedX=(Math.random()-0.5)*0.6+0.3;
    this.speedY=(Math.random()-0.5)*0.6+0.3;
    this.angle=Math.random()*2*Math.PI;
    this.angleSpeed=(Math.random()-0.5)*0.02;
    this.alpha=0.05+Math.random()*0.1;
    this.vx=0; this.vy=0;
  }
  repel(px,py){
    const dx=this.x-px, dy=this.y-py;
    const d=Math.sqrt(dx*dx+dy*dy);
    if(d<150){
      const fn=(150-d)/150*5;
      this.vx+=dx/d*fn; this.vy+=dy/d*fn;
    }
  }
  update(){
    this.vx*=0.9; this.vy*=0.9;
    this.x+=this.speedX+this.vx;
    this.y+=this.speedY+this.vy;
    this.angle+=this.angleSpeed;
    if(this.x<-20) this.x=W+20;
    if(this.x>W+20) this.x=-20;
    if(this.y<-20) this.y=H+20;
    if(this.y>H+20) this.y=-20;
  }
  draw(ctx){
    ctx.save();
    ctx.translate(this.x,this.y);
    ctx.rotate(this.angle);
    const g=ctx.createRadialGradient(0,0,this.size*0.1,0,0,this.size);
    g.addColorStop(0,`rgba(255,182,193,${this.alpha+0.2})`);
    g.addColorStop(0.6,`rgba(255,182,193,${this.alpha})`);
    g.addColorStop(1,'rgba(255,182,193,0)');
    ctx.fillStyle=g;
    ctx.beginPath();
    ctx.moveTo(0,-this.size/2);
    ctx.bezierCurveTo(this.size/2,-this.size,this.size,0,0,this.size);
    ctx.bezierCurveTo(-this.size,0,-this.size/2,-this.size,0,-this.size/2);
    ctx.fill();
    ctx.strokeStyle=`rgba(255,182,193,${this.alpha*0.3})`;
    ctx.lineWidth=0.7; ctx.shadowColor=`rgba(255,182,193,${this.alpha*0.7})`;
    ctx.shadowBlur=6; ctx.stroke();
    ctx.restore();
  }
}

// Создаем партию сердечек
function makeHearts(){
  hearts=[];
  for(let i=0;i<150;i++) hearts.push(new Heart());
}

// Создаем текстовые частицы
const offC = document.createElement('canvas'), offCtx = offC.getContext('2d');
function makeTextParticles(){
  offC.width=W; offC.height=H;
  offCtx.clearRect(0,0,W,H);
  offCtx.font=`bold ${fontSize}px Arial`;
  offCtx.textAlign='center'; offCtx.textBaseline='middle';
  offCtx.fillStyle='white'; offCtx.fillText(text,W/2,H/2);
  const D=offCtx.getImageData(0,0,W,H).data;
  textParticles=[];
  for(let y=0;y<H;y+=3)for(let x=0;x<W;x+=3){
    if(D[(y*W+x)*4+3]>128){
      textParticles.push({
        baseX:x, baseY:y,
        x:x+Math.random()-0.5,
        y:y+Math.random()-0.5,
        size:1.2,
        flick:Math.random()*2000,
        alpha:0.4+Math.random()*0.3,
        phase:Math.random()*Math.PI*2
      });
    }
  }
}

// Отрисовка светлячков текста
function drawText(){
  txCtx.clearRect(0,0,W,H);
  const fSp=0.003, mSp=0.008;
  textParticles.forEach(p=>{
    const b=0.3+0.4*Math.sin(time*fSp + p.flick);
    const wy=Math.sin(time*mSp + p.phase)*2;
    p.x=p.baseX + Math.cos(time*mSp + p.phase)*0.5;
    p.y=p.baseY + wy;
    txCtx.fillStyle=`rgba(255,182,193,${b*p.alpha})`;
    txCtx.beginPath();
    txCtx.arc(p.x,p.y,p.size,0,2*Math.PI);
    txCtx.fill();
  });
}

// Анимация фона и всех
bgC.addEventListener('click',e=>{
  const rx=e.clientX, ry=e


ntY;
  hearts.forEach(h=>h.repel(rx,ry));
});

function loop(){
  time++;
  bgCtx.fillStyle='#000'; bgCtx.fillRect(0,0,W,H);
  hearts.forEach(h=>{h.update();h.draw(bgCtx)});
  drawText();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
